

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Frequently Asked Questions &mdash; iblrig 8.24.7 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="_static/sphinx_lesson.css?v=0c089442" />
      <link rel="stylesheet" type="text/css" href="_static/term_role_formatting.css?v=4194e21c" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=43b36fd3"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
      <script src="_static/minipres.js?v=a0d29692"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api.html" />
    <link rel="prev" title="Developer Guide" href="reference_developer_guide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            iblrig
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Using IBLRIG v8</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Hardware Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference_developer_guide.html">Developer Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#first-aid">First Aid</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bug-reports-feature-requests">Bug Reports &amp; Feature Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sound-issues">Sound Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="#screen-issues">Screen Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="#defining-default-position-size-of-bonsai-visualizers">Defining Default Position &amp; Size of Bonsai Visualizers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#camera-issues">Camera Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="#frame2ttl">Frame2TTL</a></li>
<li class="toctree-l2"><a class="reference internal" href="#move-a-mouse-onto-a-previous-training-stage">Move a mouse onto a previous training stage</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/int-brain-lab/iblrig">IBLRIG on GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://doi.org/10.6084/m9.figshare.11634732">Appendix 3: IBL protocol for setting up the behavioral training rig</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">iblrig</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Frequently Asked Questions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/faq.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="frequently-asked-questions">
<h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Link to this heading"></a></h1>
<p>Here we collect common issues and questions regarding IBLRIG.</p>
<section id="first-aid">
<h2>First Aid<a class="headerlink" href="#first-aid" title="Link to this heading"></a></h2>
<p>If your rig is acting up:</p>
<ul>
<li><p>Employ the <strong>automated test-script</strong> bundled with IBLRIG. This script helps identify common configuration issues.
Execute it using PowerShell:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:\</span><span class="n">iblrigv8</span><span class="p">\</span><span class="n">venv</span><span class="p">\</span><span class="n">scripts</span><span class="p">\</span><span class="n">Activate</span><span class="p">.</span><span class="n">ps1</span>
<span class="n">validate_iblrig</span>
</pre></div>
</div>
</li>
<li><p>Check <a class="reference external" href="https://doi.org/10.6084/m9.figshare.11634732.v6">the comprehensive user manual</a> (“Appendix 3” on GoogleDrive).
Verify if all connections are secure, and configurations align with the manual’s guidelines.</p></li>
<li><p>Don’t hesitate to <strong>contact our developer team</strong> for assistance. We’re committed to getting your system back on track.</p></li>
</ul>
</section>
<section id="bug-reports-feature-requests">
<h2>Bug Reports &amp; Feature Requests<a class="headerlink" href="#bug-reports-feature-requests" title="Link to this heading"></a></h2>
<p>IBLRIG remains in dynamic development. Your input is invaluable in shaping its direction. <a class="reference external" href="https://github.com/int-brain-lab/iblrig/issues">Send us your
bug reports and feature-requests via GitHub</a> - we will do our best to help you.</p>
</section>
<section id="sound-issues">
<h2>Sound Issues<a class="headerlink" href="#sound-issues" title="Link to this heading"></a></h2>
<ul>
<li><p>Double-check all wiring for loose connections.</p></li>
<li><p>Is <code class="docutils literal notranslate"><span class="pre">hardware_settings.yaml</span></code> set up correctly? Valid options for sound <code class="docutils literal notranslate"><span class="pre">OUTPUT</span></code> are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hifi</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">harp</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xonar</span></code>, or</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sysdefault</span></code>.</p></li>
</ul>
<p>Make sure that this value matches the actual soundcard used on your rig.
Note that <code class="docutils literal notranslate"><span class="pre">sysdefault</span></code> is only used in test scenarios and should not be used during actual experiments.</p>
</li>
</ul>
</section>
<section id="screen-issues">
<h2>Screen Issues<a class="headerlink" href="#screen-issues" title="Link to this heading"></a></h2>
<section id="general">
<h3>General<a class="headerlink" href="#general" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>The ribbon cable attaching the screen to the driver board is notoriously finicky. If you are having brightness issues or do not have a signal, try gently repositioning this cable and ensure it is tightly seated in its connection.</p></li>
<li><p>Screen and ribbon cable can be easily damaged. It is useful to have backup at hand.</p></li>
<li><p>Screen flashing can occur if the power supply does not match the screen specifications. Use a 12V adapter with at least 1A.</p></li>
<li><p>If the Bonsai display is appearing on the PC screen when a task starts, try unplugging the rig screen, rebooting and plugging the screen back in. Other variations of screen unplugging and rebooting may also work.
Also make sure, that the <code class="docutils literal notranslate"><span class="pre">DISPLAY_IDX</span></code> value in <code class="docutils literal notranslate"><span class="pre">hardware_settings.yaml</span></code> is set correctly.</p></li>
</ul>
</section>
<section id="defining-default-position-size-of-bonsai-visualizers">
<h3>Defining Default Position &amp; Size of Bonsai Visualizers<a class="headerlink" href="#defining-default-position-size-of-bonsai-visualizers" title="Link to this heading"></a></h3>
<p>Is the preview window of the video recording showing on the iPad screen instead of the computer’s main display during a
session? To redefine the default position and size of the Bonsai visualizer:</p>
<ol class="arabic">
<li><p>Open the Bonsai executable distributed with IBLRIG: <code class="docutils literal notranslate"><span class="pre">C:\iblrigv8\Bonsai\Bonsai.exe</span></code>.</p></li>
<li><p>Open the respective Bonsai workflow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span>\<span class="n">iblrigv8</span>\<span class="n">devices</span>\<span class="n">camera_recordings</span>\<span class="n">TrainingRig_SaveVideo_TrainingTasks</span><span class="o">.</span><span class="n">bonsai</span>
</pre></div>
</div>
</li>
<li><p>Start the workflow by clicking on the play-button.</p></li>
<li><p>Adjust the position and size of the windows as per your preference.</p></li>
<li><p>Stop the workflow.</p></li>
<li><p>Save the workflow.</p></li>
</ol>
</section>
</section>
<section id="camera-issues">
<h2>Camera Issues<a class="headerlink" href="#camera-issues" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>If a camera is not detected by the computer or causes intermittent issues it might be an issue with the USB connection.</p>
<ul>
<li><p>Ensure that the camera is connected to the computer on a USB3 port (usually indicated by a blue plastic tab in the port).
USB2 (black tabs) neither provides the necessary transfer rates nor sufficient current to power the camera.</p></li>
<li><p>Use the <a class="reference external" href="https://www.flir.com/products/usb-3.1-locking-cable">original USB3.1 cable</a> provided by FLIR.
It comes in 3 m or 5 m - stick with the shorter version if possible.</p></li>
<li><p>Try to avoid USB extensions.
The original cable (see above) should be sufficiently long in most situations.</p></li>
<li><p>Ideally, use one of the onboard USB3 ports of your computer facing to the back of the machine.
Front-facing ports may not be able to provide enough power.</p></li>
<li><p>If you use a USB 3.1 Host Controller Card check if it requires additional powering through a SATA or Molex cable.
FLIR offers <a class="reference external" href="https://www.flir.com/products/usb-3.1-host-controller-card">a few models</a> that should work fine.</p></li>
</ul>
</li>
</ul>
</section>
<section id="frame2ttl">
<h2>Frame2TTL<a class="headerlink" href="#frame2ttl" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Version 1 of Frame2TTL won’t be detected after restarting the computer.
Unplugging and replugging the USB cable should make it responsive again.</p></li>
<li><p>If IBLRIG complains about not receiving any TTL signals from Frame2TTL:</p>
<ul>
<li><p>Ensure Frame2TTL’s sensor is positioned over the bottom-right corner of the rig’s screen.
Secure the sensor’s cable to the screen mount with a zip-tie to prevent it from slipping off the screen.
Additionally, use a piece of electrical tape to hold the sensor in place.</p></li>
<li><p>Verify that the sensor is connected to Frame2TTL with the correct polarity</p>
<ul>
<li><p>Version 1: GND = black cable, SIG = white cable</p></li>
<li><p>Version 2 and 3: BLK = black cable, WHT = white cable</p></li>
</ul>
</li>
<li><p>Ensure that Frame2TTL’s TTL Output is plugged into Bpod’s TTL Input #1.
Note that versions 2 and 3 of Frame2TTL have a second BNC output labeled “analog” - this is <em>not</em> the TTL output.</p></li>
<li><p>Recalibrate Frame2TTL using the calibration routine in IBLRIG’s Tools menu and check for any errors.</p></li>
</ul>
</li>
<li><p>If the above steps do not resolve the issue, try the following:</p>
<ol class="arabic simple">
<li><p>Swap out the BNC cable between Frame2TTL and Bpod.
Use a single cable without any branches.</p></li>
<li><p>Connect an oscilloscope to the Bpod end of the cable and run a calibration.
Look for a voltage step in Frame2TTL’s output when the calibration routine switches from dark to light.</p></li>
<li><p>If you <em>do</em> see the change in the TTL signal, the Bpod might be faulty. Try using a different Bpod unit.</p></li>
<li><p>If you do <em>not</em> see the voltage step, the Frame2TTL might be faulty. Try using a different Frame2TTL unit.</p></li>
</ol>
</li>
</ul>
</section>
<section id="move-a-mouse-onto-a-previous-training-stage">
<h2>Move a mouse onto a previous training stage<a class="headerlink" href="#move-a-mouse-onto-a-previous-training-stage" title="Link to this heading"></a></h2>
<p>Training phases enfold according to an automated procedure, see the <a class="reference external" href="https://figshare.com/articles/preprint/A_standardized_and_reproducible_method_to_measure_decision-making_in_mice_Appendix_2_IBL_protocol_for_mice_training/11634729?file=38099442">mouse training protocol on Figshare</a> for a description of these phases.</p>
<p>However, it is possible that one wants to overwrite the automated progression, and bring back an animal onto a previous
training stage.</p>
<p>In this case:</p>
<ol class="arabic">
<li><p>Select the training protocol on the GUI</p></li>
<li><p>Select the wanted training phase manually</p>
<figure class="align-default" id="id1">
<a class="with-border reference internal image-reference" href="_images/training_phase_manual_update.png"><img alt="_images/training_phase_manual_update.png" class="with-border" src="_images/training_phase_manual_update.png" style="width: 100%;" />
</a>
<figcaption>
<p><span class="caption-text">Select the training phase manually using the arrows.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
</ol>
<p>On the next day of training, the “automatic” criteria will be computed assuming the training phase last used, i.e.
the one you manually selected in this instance.</p>
<p>For example, if you have a mouse on Training Phase 5, and move it manually to Phase 4 (which can be useful when
trying to debias an animal), the next session on “automatic” mode will compute the stage progression from stage 4,
and disregard the fact that the mouse was on Phase 5 beforehand.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="reference_developer_guide.html" class="btn btn-neutral float-left" title="Developer Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018 – 2024 International Brain Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>